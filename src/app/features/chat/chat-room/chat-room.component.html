<div class="h-full flex gap-4">
  <!-- Left Sidebar - Participants List -->
  <div class="w-80 border-r h-full flex flex-col bg-white">
    <div class="p-4 border-b">
      <h2 class="text-xl font-semibold">Participants</h2>
    </div>
    <div class="flex-1 overflow-y-auto">
      @for (participant of participants; track participant.userId) {
        <app-participant
          [name]="participant.name"
          [avatarUrl]="participant.avatarUrl"
        />
      }
    </div>
  </div>

  <!-- Right Side - Chat Messages -->
  <div class="flex-1 flex flex-col h-full bg-white ">
    <!-- Chat Header -->
    <div class="p-4 border-b bg-white">
      <h2 class="text-xl font-semibold">Chat Room</h2>
      @if (errorMessage()) {
        <div class="mt-2 text-sm text-red-600 dark:text-red-400 animate-fade-in">
          {{ errorMessage() }}
        </div>
      }
    </div>

    <!-- Messages Container -->
    <div class="messages-container flex-1 overflow-y-auto p-4 space-y-4">
      @for (message of messages(); track message.messageId) {
        <div class="flex" [class]="message.senderId === currentUserId ? 'justify-end' : 'justify-start'">
          <div class="max-w-[70%] rounded-lg p-3 message-bubble"
               [class]="message.senderId === currentUserId ? 'sent' : 'received'">
            <div class="break-words">{{ message.content }}</div>
            <div class="text-xs mt-1 message-time" 
                 [class]="message.senderId === currentUserId ? 'sent' : 'received'">
              {{ message.createdAt | date:'short' }}
            </div>
          </div>
        </div>
      }
    </div>

    <!-- Message Composer -->
    <div class="p-4 border-t bg-white">
      <app-message-composer 
        [roomId]="roomId()" 
        (messageSent)="onMessageSent($event)">
      </app-message-composer>
    </div>
  </div>
</div>

